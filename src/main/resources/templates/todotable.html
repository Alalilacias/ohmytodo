<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="todotable-fragment" class="px-3 pt-3">
    <h2 th:text="#{todotable.heading}">Todos</h2>

    <form id="filterForm" class="row g-2 align-items-end mb-4">
        <div class="col-md-3">
            <label for="filter-title" class="form-label" th:text="#{todotable.filter.title}">Filter by title</label>
            <input type="text" id="filter-title" class="form-control" name="text"
                   th:value="${text}" th:placeholder="#{todotable.filter.title2}" />
        </div>

        <div class="col-md-3">
            <label for="filter-username" class="form-label" th:text="#{todotable.filter.username}">Filter by username</label>
            <input type="text" id="filter-username" class="form-control" name="username"
                   th:value="${username}" th:placeholder="#{todotable.filter.username2}" />
        </div>

        <div class="col-md-3">
            <label for="filter-sort" class="form-label" th:text="#{todotable.filter.sortby}">Sort by</label>
            <select id="filter-sort" class="form-select" name="sort">
                <option th:value="title" th:text="#{todotable.column.title}" th:selected="${sort == 'title'}">Title</option>
                <option th:value="username" th:text="#{todotable.column.username}" th:selected="${sort == 'username'}">Username</option>
                <option th:value="country" th:text="#{todotable.column.country}" th:selected="${sort == 'country'}">Country</option>
                <option th:value="completed" th:text="#{todotable.column.completed}" th:selected="${sort == 'completed'}">Completed</option>
            </select>
        </div>

        <div class="col-md-3">
            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-primary flex-grow-1" th:text="#{todotable.filter.search}">Search</button>
                <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#createTodoModal" th:text="#{todotable.create}">Create</button>
            </div>
        </div>
    </form>

    <div class="table-responsive">
        <table class="table table-bordered table-hover align-middle text-center">
            <thead>
            <tr>
                <th th:text="#{todotable.column.title}">Title</th>
                <th th:text="#{todotable.column.username}">Username</th>
                <th th:text="#{todotable.column.country}">Country</th>
                <th th:text="#{todotable.column.completed}">Completed</th>
                <th th:text="#{todotable.column.actions}">Actions</th>
            </tr>
            </thead>
            <tbody id="todo-table-body">
            <tr><td colspan="5" th:text="#{todotable.loading}">Loading...</td></tr>
            </tbody>
        </table>
    </div>

    <nav>
        <ul class="pagination justify-content-center" id="pagination"></ul>
    </nav>

    <div th:replace="~{createtodomodal :: create-todo-modal}"></div>
    <div th:replace="~{edittodomodal :: edit-todo-modal}"></div>

    <script th:src="@{/scripts/todo.js}" defer></script>
</div>
</body>
</html>